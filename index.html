<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <title>uxinuxinTest</title>

  <style>
    body {
      position: relative;
      right: 0;
      overflow-x: hidden;
    }

    #gnav {
      position: fixed;
      top: 0;
      right: -240px;
      width: 240px;
      height: 100%;
      background: #CCC;
    }

    #gnav-menu {
      float: right;
    }
  </style>

  <script src="http://code.jquery.com/jquery-2.0.0.js"></script>
</head>

<body>
  <button id="gnav-menu">Menu</button>

  <nav id="gnav">
    <ul>
      <li><a href="#">menu1</a></li>
      <li><a href="#">menu2</a></li>
      <li><a href="#">menu3</a></li>
      <li><a href="#">menu4</a></li>
      <li><a href="#">menu5</a></li>
    </ul>
  </nav>

  <script>
    $(function() {
      var menu = $('#gnav');
      var menuBtn = $('#gnav-menu');
      var body = $(document.body);
      var menuWidth = menu.outerWidth();


      menuBtn.on('click', function() {
        body.toggleClass('open');
        if (body.hasClass('open')) {
          body.animate({
            'right': menuWidth
          }, 300);
          menu.animate({
            'right': 0
          }, 300);
        } else {
          menu.animate({
            'right': -menuWidth
          }, 300);
          body.animate({
            'right': 0
          }, 300);
        }
      });

      $(document).on('click', function(e) {
        if (!$(e.target).closest(menu).length && !$(e.target).closest(menuBtn).length) {
          menu.animate({
            'right': -menuWidth
          }, 300);
          body.animate({
            'right': 0
          }, 300);
          body.removeClass('open');
        }
      });

    });
  </script>

</body>

</html>
